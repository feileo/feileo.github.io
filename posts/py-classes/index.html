<!DOCTYPE html>
<html class="no-js" lang="zh-cn">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="baidu-site-verification" content="0iFDP8mhHL" />
	<title>
		
			
				èµ°è¿› Python ç±»çš„å†…éƒ¨ -
			
			feileo
		 çš„åšå®¢
	</title>
	<script>
		(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");
	</script>
	<meta name="description" content="è¿™ç¯‡æ–‡ç« å’Œå¤§å®¶ä¸€èµ·èŠä¸€èŠ Python 3.8 ä¸­ç±»å’Œå¯¹è±¡èƒŒåçš„ä¸€äº›æ¦‚å¿µå’Œå®ç°åŸç†ï¼Œä¸»è¦å°è¯•è§£é‡Š Python ç±»å’Œå¯¹è±¡å±æ€§çš„å­˜å‚¨ï¼Œå‡½æ•°å’Œæ–¹æ³•ï¼Œæè¿°å™¨ï¼Œå¯¹è±¡å†…å­˜å ç”¨çš„ä¼˜åŒ–æ”¯æŒï¼Œä»¥åŠç»§æ‰¿ä¸å±æ€§æŸ¥æ‰¾ç­‰ç›¸å…³é—®é¢˜ ...">
	
		<meta property="og:title" content="èµ°è¿› Python ç±»çš„å†…éƒ¨" />
<meta property="og:description" content="è¿™ç¯‡æ–‡ç« å’Œå¤§å®¶ä¸€èµ·èŠä¸€èŠ Python 3.8 ä¸­ç±»å’Œå¯¹è±¡èƒŒåçš„ä¸€äº›æ¦‚å¿µå’Œå®ç°åŸç†ï¼Œä¸»è¦å°è¯•è§£é‡Š Python ç±»å’Œå¯¹è±¡å±æ€§çš„å­˜å‚¨ï¼Œå‡½æ•°å’Œæ–¹æ³•ï¼Œæè¿°å™¨ï¼Œå¯¹è±¡å†…å­˜å ç”¨çš„ä¼˜åŒ–æ”¯æŒï¼Œä»¥åŠç»§æ‰¿ä¸å±æ€§æŸ¥æ‰¾ç­‰ç›¸å…³é—®é¢˜ ..." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://at7h.com/posts/py-classes/" />
<meta property="article:published_time" content="2020-09-17T00:00:00+00:00" />
<meta property="article:modified_time" content="2020-09-17T00:00:00+00:00" />

	
	
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">
	<link rel="stylesheet" href="/css/style.css">
	
	<link rel="shortcut icon" href="/img/favicon.ico">
	
		
<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-155215466-1', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>

	<link rel="stylesheet" href="/highlight/styles/atom-one-dark.css">

	<script src="/js/jquery.min.js"></script>
	<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
	<script src="/highlight/highlight.pack.js" type='text/javascript'></script>
	
	<script type="text/javascript">
	$(document).ready(function(){
    hljs.initHighlightingOnLoad();
		
	});

	(function(){
		var bp = document.createElement('script');
		var curProtocol = window.location.protocol.split(':')[0];
		if (curProtocol === 'https') {
			bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
		}
		else {
			bp.src = 'http://push.zhanzhang.baidu.com/push.js';
		}
		var s = document.getElementsByTagName("script")[0];
		s.parentNode.insertBefore(bp, s);
  	})();
	</script>
</head>

<body class="body">
	<div class="container container--outer">
		<header class="header">
    <div class="container">
        <div class="logo">
            <a class="logo__link" href="/" title="feileo" rel="home">
              <div class="logo__title">
								feileo  
							</div>
							
							<div class="logo__tagline">å…³æ³¨äº’è”ç½‘å¼€å‘æŠ€æœ¯ï¼Œè®°å½•ã€æ€»ç»“ä¸åˆ†äº« ğŸ‘£</div>
							
						</a>
						
        </div>
        

<nav class="menu">
	<button class="menu__btn" aria-haspopup="true" aria-expanded="false" tabindex="0">
		<span class="menu__btn-title" tabindex="-1"><svg t="1571404030009" class="meta__icon icon icon-list" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="1829" width="20" height="20"><path d="M892.928 128q28.672 0 48.64 19.968t19.968 48.64l0 52.224q0 28.672-19.968 48.64t-48.64 19.968l-759.808 0q-28.672 0-48.64-19.968t-19.968-48.64l0-52.224q0-28.672 19.968-48.64t48.64-19.968l759.808 0zM892.928 448.512q28.672 0 48.64 19.968t19.968 48.64l0 52.224q0 28.672-19.968 48.64t-48.64 19.968l-759.808 0q-28.672 0-48.64-19.968t-19.968-48.64l0-52.224q0-28.672 19.968-48.64t48.64-19.968l759.808 0zM892.928 769.024q28.672 0 48.64 19.968t19.968 48.64l0 52.224q0 28.672-19.968 48.64t-48.64 19.968l-759.808 0q-28.672 0-48.64-19.968t-19.968-48.64l0-52.224q0-28.672 19.968-48.64t48.64-19.968l759.808 0z" p-id="1830" fill="#1e90ff"></path></svg></span>
	</button>
	<mul class="menu__list">
		
		<li class="menu__item">
			<a class="menu__link__home" href="/"><svg t="1571149675735" class="meta__icon icon icon-home" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3856" width="22" height="22"><path d="M230.4 992c-64 0-115.2-51.2-115.2-115.2L115.2 544 76.8 582.4C70.4 588.8 57.6 595.2 44.8 595.2c-12.8 0-25.6-6.4-32-12.8C6.4 569.6 0 556.8 0 544 0 537.6 6.4 524.8 12.8 512l467.2-467.2C486.4 38.4 499.2 32 512 32s25.6 6.4 32 12.8L1011.2 512C1017.6 524.8 1024 537.6 1024 544c0 12.8-6.4 25.6-12.8 32-6.4 6.4-19.2 12.8-32 12.8s-25.6-6.4-32-12.8L512 147.2 211.2 448l0 422.4c0 12.8 12.8 25.6 25.6 25.6l115.2 0 0-185.6c0-25.6 19.2-44.8 44.8-44.8l230.4 0c25.6 0 44.8 19.2 44.8 44.8s-19.2 44.8-44.8 44.8L441.6 755.2l0 185.6c0 25.6-19.2 44.8-44.8 44.8L230.4 985.6zM627.2 992c-25.6 0-44.8-19.2-44.8-44.8 0-25.6 19.2-44.8 44.8-44.8l160 0c12.8 0 25.6-12.8 25.6-25.6l0-256c0-25.6 19.2-44.8 44.8-44.8 25.6 0 44.8 19.2 44.8 44.8l0 256c0 64-51.2 115.2-115.2 115.2L627.2 992z" p-id="3857" fill="#ffffff"></path></svg></a>
		</li>
		
		
		
		<li class="menu__item">
			<a class="menu__link"
				href="/categories/python">Python</a>
		</li>
		
		
		
		<li class="menu__item">
			<a class="menu__link"
				href="/categories/golang">Golang</a>
		</li>
		
		
		
		
		
		
		
		<li class="menu__item">
			<a class="menu__link"
				href="/categories/vim">Vim</a>
		</li>
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		<li class="menu__item">
			<a class="menu__link" href="/categories/tool">æ•ˆç‡å·¥å…·</a>
			
		</li>
		
		
		
		
		
	</mul>
</nav>

    </div>
</header>



		<div class="wrapper flex">
			<div class="primary">
			

<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<div class="post__title">èµ°è¿› Python ç±»çš„å†…éƒ¨</div>
			<div class="post__meta meta">
					
<div class="meta__item-categories meta__item">
	<svg t="1571148699121" class="meta__icon icon icon-category" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5705" width="16" height="16"><path d="M853.333333 938.666667 42.666667 938.666667c-25.6 0-42.666667-17.066667-42.666667-42.666667L0 128c0-25.6 17.066667-42.666667 42.666667-42.666667l298.666667 0c25.6 0 42.666667 17.066667 42.666667 42.666667l0 42.666667 469.333333 0c25.6 0 42.666667 17.066667 42.666667 42.666667l0 170.666667c0 25.6-17.066667 42.666667-42.666667 42.666667s-42.666667-17.066667-42.666667-42.666667L810.666667 256 341.333333 256C315.733333 256 298.666667 238.933333 298.666667 213.333333L298.666667 170.666667 85.333333 170.666667l0 682.666667 768 0c25.6 0 42.666667 17.066667 42.666667 42.666667S878.933333 938.666667 853.333333 938.666667z" p-id="5706" fill="#515151"></path><path d="M853.333333 938.666667 42.666667 938.666667c-12.8 0-25.6-4.266667-34.133333-17.066667S0 900.266667 0 887.466667l128-512C132.266667 354.133333 149.333333 341.333333 170.666667 341.333333l810.666667 0c12.8 0 25.6 4.266667 34.133333 17.066667S1024 379.733333 1024 392.533333l-128 512C891.733333 925.866667 874.666667 938.666667 853.333333 938.666667zM98.133333 853.333333l721.066667 0 106.666667-426.666667L204.8 426.666667 98.133333 853.333333z" p-id="5707" fill="#515151"></path></svg>
	<span class="meta__text">
		
		<a class="meta__link" href="/categories/python" rel="category">
			
			Python
			
		</a>
		
	</span>
</div>

<div class="meta__item-datetime meta__item">
	<svg t="1571148896140" class="meta__icon icon icon-date" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="8190" width="16" height="16"><path d="M883.278513 148.539035l-43.016723 0 0-12.780071c0-38.310537-31.199583-69.632917-69.323878-69.632917l-1.02433 0c-38.129412 0-69.323878 31.321356-69.323878 69.632917l0 12.780071L317.20292 148.539035l0-12.780071c0-38.310537-31.195489-69.632917-69.323878-69.632917l-1.055029 0c-38.127366 0-69.322855 31.321356-69.322855 69.632917l0 12.780071-42.924625 0c-38.127366 0-69.323878 31.351032-69.323878 69.609381l0 665.701614c0 38.309514 31.195489 69.632917 69.323878 69.632917l748.70198 0c38.127366 0 69.322855-31.323403 69.322855-69.632917l0-665.701614C952.601368 179.890067 921.405879 148.539035 883.278513 148.539035L883.278513 148.539035zM728.318232 135.758963c0-23.024389 18.632359-41.777499 41.594327-41.777499l1.02433 0c22.931269 0 41.593304 18.753109 41.593304 41.777499L812.530193 259.615852c0 23.024389-18.662035 41.778522-41.593304 41.778522l-1.02433 0c-22.961968 0-41.594327-18.754133-41.594327-41.778522L728.318232 135.758963 728.318232 135.758963zM205.23071 135.758963c0-23.024389 18.632359-41.777499 41.599444-41.777499l1.048889 0c22.903639 0 41.594327 18.753109 41.594327 41.777499L289.473369 259.615852c0 23.024389-18.691711 41.778522-41.594327 41.778522l-1.048889 0c-22.967084 0-41.599444-18.754133-41.599444-41.778522L205.23071 135.758963 205.23071 135.758963zM883.278513 897.807926l-748.70198 0c-7.519254 0-13.864776-6.468318-13.864776-13.957897L120.711757 394.394489l776.433578 0 0 489.455541C897.144312 891.338584 890.797767 897.807926 883.278513 897.807926L883.278513 897.807926zM222.614635 494.083955l127.918391 0 0 62.950727L222.614635 557.034682 222.614635 494.083955 222.614635 494.083955zM445.963493 494.083955l126.906342 0 0 62.950727L445.963493 557.034682 445.963493 494.083955 445.963493 494.083955zM668.299277 494.083955l124.873032 0 0 62.950727L668.299277 557.034682 668.299277 494.083955 668.299277 494.083955zM222.614635 622.00951l127.918391 0 0 61.927421L222.614635 683.936931 222.614635 622.00951 222.614635 622.00951zM445.963493 622.00951l126.906342 0 0 61.927421L445.963493 683.936931 445.963493 622.00951 445.963493 622.00951zM668.299277 622.00951l124.873032 0 0 61.927421L668.299277 683.936931 668.299277 622.00951 668.299277 622.00951zM222.614635 746.884588l127.918391 0 0 64.97278L222.614635 811.857369 222.614635 746.884588 222.614635 746.884588zM445.963493 746.884588l126.906342 0 0 64.97278L445.963493 811.857369 445.963493 746.884588 445.963493 746.884588zM668.299277 746.884588l124.873032 0 0 64.97278L668.299277 811.857369 668.299277 746.884588 668.299277 746.884588zM668.299277 746.884588" p-id="8191" fill="#515151"></path></svg>
	æ›´æ–°äº <time class="meta__text" datetime="2020-09-17T00:00:00">2020-09-17</time>
</div>

<div class="meta__item-word_count meta__item">
	<svg t="1571149110363" class="meta__icon icon icon-wordcount" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="1792" width="16" height="16"><path d="M286.722048 405.987328l0 477.058048-132.51584 0L154.206208 405.987328 286.722048 405.987328M313.22624 352.980992 127.70304 352.980992c-14.636032 0-26.503168 11.867136-26.503168 26.503168L101.199872 909.54752c0 14.636032 11.867136 26.503168 26.503168 26.503168l185.5232 0c14.636032 0 26.503168-11.867136 26.503168-26.503168L339.729408 379.483136C339.729408 364.847104 327.862272 352.980992 313.22624 352.980992L313.22624 352.980992zM577.998848 563.557376l0 319.488L445.476864 883.045376l0-319.488L577.998848 563.557376M604.502016 510.543872l-185.52832 0c-14.636032 0-26.503168 11.859968-26.503168 26.510336L392.470528 909.54752c0 14.636032 11.867136 26.503168 26.503168 26.503168l185.52832 0c14.623744 0 26.504192-11.867136 26.504192-26.503168L631.006208 537.054208c0-14.623744-11.880448-26.497024-26.504192-26.497024l0 0L604.502016 510.543872zM869.792768 140.954624l0 742.090752L737.5104 883.045376l0-742.090752L869.792768 140.954624M896.29696 87.948288 711.007232 87.948288c-14.649344 0-26.503168 11.867136-26.503168 26.503168L684.504064 909.54752c0 14.636032 11.853824 26.503168 26.503168 26.503168L896.29696 936.050688c14.636032 0 26.503168-11.867136 26.503168-26.503168l0-795.096064C922.800128 99.815424 910.932992 87.948288 896.29696 87.948288L896.29696 87.948288z" p-id="1793" fill="#515151"></path></svg>
    çº¦ <span class="meta__text">3561</span> ä¸ªå­—
</div>

<div class="meta__item-reading_time meta__item">
	<svg t="1571149199980" class="meta__icon icon icon-time" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2748" width="16" height="16"><path d="M512 64C264.96 64 64 264.96 64 512s200.96 448 448 448 448-200.96 448-448S759.04 64 512 64zM512 895.712c-211.584 0-383.712-172.16-383.712-383.712C128.288 300.416 300.416 128.288 512 128.288c211.552 0 383.712 172.128 383.712 383.712C895.712 723.552 723.552 895.712 512 895.712z" p-id="2749" fill="#515151"></path><path d="M671.968 512 512 512 512 288.064c0-17.76-14.24-32.128-32-32.128s-32 14.4-32 32.128L448 544c0 17.76 14.272 32 32 32l191.968 0c17.76 0 32.128-14.24 32.128-32S689.728 512 671.968 512z" p-id="2750" fill="#515151"></path></svg>    
    é˜…è¯»çº¦éœ€ <span class="meta__text">
        
            8
         m</span>
</div>

						<div class="meta__item-page_pv meta__item">
    
    <span class="meta__text">
        <span id="busuanzi_container_page_pv">
            
        </span>
    </span>
</div>
				</div>
		</header>
		<div class="content post__content clearfix">
			<p>è¿™ç¯‡æ–‡ç« å’Œå¤§å®¶ä¸€èµ·èŠä¸€èŠ Python 3.8 ä¸­ç±»å’Œå¯¹è±¡èƒŒåçš„ä¸€äº›æ¦‚å¿µå’Œå®ç°åŸç†ï¼Œä¸»è¦å°è¯•è§£é‡Š Python ç±»å’Œå¯¹è±¡å±æ€§çš„å­˜å‚¨ï¼Œå‡½æ•°å’Œæ–¹æ³•ï¼Œæè¿°å™¨ï¼Œå¯¹è±¡å†…å­˜å ç”¨çš„ä¼˜åŒ–æ”¯æŒï¼Œä»¥åŠç»§æ‰¿ä¸å±æ€§æŸ¥æ‰¾ç­‰ç›¸å…³é—®é¢˜ã€‚</p>
<p>è®©æˆ‘ä»¬ä»ä¸€ä¸ªç®€å•çš„ä¾‹å­å¼€å§‹ï¼š</p>
<div class="highlight"><pre style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#719e07">class</span> <span style="color:#268bd2">Employee</span>:

    outsource <span style="color:#719e07">=</span> <span style="color:#268bd2">False</span>

    <span style="color:#719e07">def</span> __init__(<span style="color:#268bd2">self</span>, department, name):
        <span style="color:#268bd2">self</span><span style="color:#719e07">.</span>department <span style="color:#719e07">=</span> department
        <span style="color:#268bd2">self</span><span style="color:#719e07">.</span>name <span style="color:#719e07">=</span> name

    <span style="color:#268bd2">@property</span>
    <span style="color:#719e07">def</span> <span style="color:#268bd2">inservice</span>(<span style="color:#268bd2">self</span>):
        <span style="color:#719e07">return</span> <span style="color:#268bd2">self</span><span style="color:#719e07">.</span>department <span style="color:#719e07">is</span> <span style="color:#719e07">not</span> <span style="color:#268bd2">None</span>

    <span style="color:#719e07">def</span> __repr__(<span style="color:#268bd2">self</span>):
        <span style="color:#719e07">return</span> f<span style="color:#2aa198">&#34;&lt;Employee: {self.department}-{self.name}&gt;&#34;</span>

employee <span style="color:#719e07">=</span> Employee(<span style="color:#2aa198">&#39;IT&#39;</span>, <span style="color:#2aa198">&#39;bobo&#39;</span>)
</code></pre></div><p><code>employee</code> å¯¹è±¡æ˜¯ <code>Employee</code> ç±»çš„ä¸€ä¸ªå®ä¾‹ï¼Œå®ƒæœ‰ä¸¤ä¸ªå±æ€§ <code>department</code> å’Œ <code>name</code>ï¼Œå…¶å€¼å±äºè¯¥å®ä¾‹ã€‚<code>outsource</code> æ˜¯ç±»å±æ€§ï¼Œæ‰€æœ‰è€…æ˜¯ç±»ï¼Œè¯¥ç±»çš„æ‰€æœ‰å®ä¾‹å¯¹è±¡å…±äº«æ­¤å±æ€§å€¼ï¼Œè¿™è·Ÿå…¶ä»–é¢å‘å¯¹è±¡è¯­è¨€ä¸€è‡´ã€‚</p>
<p>æ›´æ”¹ç±»å˜é‡ä¼šå½±å“åˆ°è¯¥ç±»çš„æ‰€æœ‰å®ä¾‹å¯¹è±¡ï¼š</p>
<div class="highlight"><pre style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#719e07">&gt;&gt;&gt;</span> e1 <span style="color:#719e07">=</span> Employee(<span style="color:#2aa198">&#39;IT&#39;</span>, <span style="color:#2aa198">&#39;bobo&#39;</span>)
<span style="color:#719e07">&gt;&gt;&gt;</span> e2 <span style="color:#719e07">=</span> Employee(<span style="color:#2aa198">&#39;HR&#39;</span>, <span style="color:#2aa198">&#39;cici&#39;</span>)
<span style="color:#719e07">&gt;&gt;&gt;</span> e1<span style="color:#719e07">.</span>outsource, e2<span style="color:#719e07">.</span>outsource
(<span style="color:#268bd2">False</span>, <span style="color:#268bd2">False</span>)
<span style="color:#719e07">&gt;&gt;&gt;</span> Employee<span style="color:#719e07">.</span>outsource <span style="color:#719e07">=</span> <span style="color:#268bd2">True</span>
<span style="color:#719e07">&gt;&gt;&gt;</span> e1<span style="color:#719e07">.</span>outsource, e2<span style="color:#719e07">.</span>outsource
<span style="color:#719e07">&gt;&gt;&gt;</span> (<span style="color:#268bd2">True</span>, <span style="color:#268bd2">True</span>)
</code></pre></div><p>è¿™ä»…é™äºä»ç±»æ›´æ”¹ï¼Œå½“æˆ‘ä»¬ä»å®ä¾‹æ›´æ”¹ç±»å˜é‡æ—¶ï¼š</p>
<div class="highlight"><pre style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#719e07">&gt;&gt;&gt;</span> e1 <span style="color:#719e07">=</span> Employee(<span style="color:#2aa198">&#39;IT&#39;</span>, <span style="color:#2aa198">&#39;bobo&#39;</span>)
<span style="color:#719e07">&gt;&gt;&gt;</span> e2 <span style="color:#719e07">=</span> Employee(<span style="color:#2aa198">&#39;HR&#39;</span>, <span style="color:#2aa198">&#39;cici&#39;</span>)
<span style="color:#719e07">&gt;&gt;&gt;</span> e1<span style="color:#719e07">.</span>outsource, e2<span style="color:#719e07">.</span>outsource
(<span style="color:#268bd2">False</span>, <span style="color:#268bd2">False</span>)
<span style="color:#719e07">&gt;&gt;&gt;</span> e1<span style="color:#719e07">.</span>outsource <span style="color:#719e07">=</span> <span style="color:#268bd2">True</span>
<span style="color:#719e07">&gt;&gt;&gt;</span> e1<span style="color:#719e07">.</span>outsource, e2<span style="color:#719e07">.</span>outsource
(<span style="color:#268bd2">True</span>, <span style="color:#268bd2">False</span>)
</code></pre></div><p>æ˜¯çš„ï¼Œå½“ä½ è¯•å›¾ä»å®ä¾‹å¯¹è±¡ä¿®æ”¹ç±»å˜é‡æ—¶ï¼ŒPython ä¸ä¼šæ›´æ”¹è¯¥ç±»çš„ç±»å˜é‡å€¼ï¼Œè€Œæ˜¯åˆ›å»ºä¸€ä¸ªåŒåçš„å®ä¾‹å±æ€§ï¼Œè¿™æ˜¯éå¸¸æ­£ç¡®ä¸”å®‰å…¨çš„ã€‚åœ¨æœç´¢å±æ€§å€¼æ—¶ï¼Œå®ä¾‹å˜é‡ä¼šä¼˜å…ˆäºç±»å˜é‡ï¼Œè¿™å°†åœ¨<a href="#%E7%BB%A7%E6%89%BF%E4%B8%8E%E5%B1%9E%E6%80%A7%E6%9F%A5%E6%89%BE">ç»§æ‰¿ä¸å±æ€§æŸ¥æ‰¾</a>ä¸€èŠ‚ä¸­è¯¦ç»†è§£é‡Šã€‚</p>
<p>å€¼å¾—ç‰¹åˆ«æ³¨æ„çš„æ˜¯ï¼Œå½“ç±»å˜é‡çš„ç±»å‹æ˜¯<strong>å¯å˜ç±»å‹</strong>æ—¶ï¼Œä½ æ˜¯ä»å®ä¾‹å¯¹è±¡ä¸­æ›´æ”¹çš„å®ƒä»¬çš„ï¼š</p>
<div class="highlight"><pre style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#719e07">&gt;&gt;&gt;</span> <span style="color:#719e07">class</span> <span style="color:#268bd2">S</span>:
<span style="color:#719e07">...</span>     L <span style="color:#719e07">=</span> [<span style="color:#2aa198">1</span>, <span style="color:#2aa198">2</span>]
<span style="color:#719e07">...</span>
<span style="color:#719e07">&gt;&gt;&gt;</span> s1, s2 <span style="color:#719e07">=</span> S(), S()
<span style="color:#719e07">&gt;&gt;&gt;</span> s1<span style="color:#719e07">.</span>L, s2<span style="color:#719e07">.</span>L
([<span style="color:#2aa198">1</span>, <span style="color:#2aa198">2</span>], [<span style="color:#2aa198">1</span>, <span style="color:#2aa198">2</span>])
<span style="color:#719e07">&gt;&gt;&gt;</span> t1<span style="color:#719e07">.</span>L<span style="color:#719e07">.</span>append(<span style="color:#2aa198">3</span>)
<span style="color:#719e07">&gt;&gt;&gt;</span> t1<span style="color:#719e07">.</span>L, s2<span style="color:#719e07">.</span>L
([<span style="color:#2aa198">1</span>, <span style="color:#2aa198">2</span>, <span style="color:#2aa198">3</span>], [<span style="color:#2aa198">1</span>, <span style="color:#2aa198">2</span>, <span style="color:#2aa198">3</span>])
</code></pre></div><p>å¥½çš„å®è·µæ–¹å¼æ˜¯åº”å½“å°½é‡çš„é¿å…è¿™æ ·çš„è®¾è®¡ã€‚</p>
<h1 id="å±æ€§çš„å­˜å‚¨">å±æ€§çš„å­˜å‚¨</h1>
<p>æœ¬å°èŠ‚æˆ‘ä»¬ä¸€èµ·æ¥çœ‹çœ‹ Python ä¸­çš„ç±»å±æ€§ã€æ–¹æ³•åŠå®ä¾‹å±æ€§æ˜¯å¦‚ä½•å…³è”å­˜å‚¨çš„ã€‚</p>
<h2 id="å®ä¾‹å±æ€§">å®ä¾‹å±æ€§</h2>
<p>åœ¨ Python ä¸­ï¼Œæ‰€æœ‰å®ä¾‹å±æ€§éƒ½å­˜å‚¨åœ¨ <code>__dict__</code> å­—å…¸ä¸­ï¼Œè¿™å°±æ˜¯ä¸€ä¸ªå¸¸è§„çš„ <code>dict</code>ï¼Œå¯¹äºå®ä¾‹å±æ€§çš„ç»´æŠ¤å³æ˜¯ä»è¯¥å­—å…¸ä¸­è·å–å’Œä¿®æ”¹ï¼Œå®ƒå¯¹å¼€å‘è€…æ˜¯å®Œå…¨å¼€æ”¾çš„ã€‚</p>
<div class="highlight"><pre style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#719e07">&gt;&gt;&gt;</span> e <span style="color:#719e07">=</span> Employee(<span style="color:#2aa198">&#39;IT&#39;</span>, <span style="color:#2aa198">&#39;bobo&#39;</span>)
<span style="color:#719e07">&gt;&gt;&gt;</span> e<span style="color:#719e07">.</span>__dict__
{<span style="color:#2aa198">&#39;department&#39;</span>: <span style="color:#2aa198">&#39;IT&#39;</span>, <span style="color:#2aa198">&#39;name&#39;</span>: <span style="color:#2aa198">&#39;bobo&#39;</span>}
<span style="color:#719e07">&gt;&gt;&gt;</span> <span style="color:#b58900">type</span>(e<span style="color:#719e07">.</span>__dict__)
<span style="color:#b58900">dict</span>
<span style="color:#719e07">&gt;&gt;&gt;</span> e<span style="color:#719e07">.</span>name <span style="color:#719e07">is</span> e<span style="color:#719e07">.</span>__dict__[<span style="color:#2aa198">&#39;name&#39;</span>]
<span style="color:#268bd2">True</span>
<span style="color:#719e07">&gt;&gt;&gt;</span> e<span style="color:#719e07">.</span>__dict__[<span style="color:#2aa198">&#39;department&#39;</span>] <span style="color:#719e07">=</span> <span style="color:#2aa198">&#39;HR&#39;</span>
<span style="color:#719e07">&gt;&gt;&gt;</span> e<span style="color:#719e07">.</span>department
<span style="color:#2aa198">&#39;HR&#39;</span>
</code></pre></div><p>æ­£å› ä¸ºå®ä¾‹å±æ€§æ˜¯é‡‡ç”¨å­—å…¸æ¥å­˜å‚¨ï¼Œæ‰€ä»¥ä»»ä½•æ—¶å€™æˆ‘ä»¬éƒ½å¯ä»¥æ–¹ä¾¿çš„ç»™å¯¹è±¡æ·»åŠ æˆ–åˆ é™¤å­—æ®µï¼š</p>
<div class="highlight"><pre style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-py" data-lang="py"><span style="color:#719e07">&gt;&gt;&gt;</span> e<span style="color:#719e07">.</span>age <span style="color:#719e07">=</span> <span style="color:#2aa198">30</span> <span style="color:#586e75"># å¹¶æ²¡æœ‰å®šä¹‰ age å±æ€§</span>
<span style="color:#719e07">&gt;&gt;&gt;</span> e<span style="color:#719e07">.</span>age
<span style="color:#2aa198">30</span>
<span style="color:#719e07">&gt;&gt;&gt;</span> e<span style="color:#719e07">.</span>__dict__
{<span style="color:#2aa198">&#39;department&#39;</span>: <span style="color:#2aa198">&#39;IT&#39;</span>, <span style="color:#2aa198">&#39;name&#39;</span>: <span style="color:#2aa198">&#39;bobo&#39;</span>, <span style="color:#2aa198">&#39;age&#39;</span>: <span style="color:#2aa198">30</span>}
<span style="color:#719e07">&gt;&gt;&gt;</span> <span style="color:#719e07">del</span> e<span style="color:#719e07">.</span>age
<span style="color:#719e07">&gt;&gt;&gt;</span> e<span style="color:#719e07">.</span>__dict__
{<span style="color:#2aa198">&#39;department&#39;</span>: <span style="color:#2aa198">&#39;IT&#39;</span>, <span style="color:#2aa198">&#39;name&#39;</span>: <span style="color:#2aa198">&#39;d&#39;</span>}
</code></pre></div><p>æˆ‘ä»¬ä¹Ÿå¯ä»¥ä»å­—å…¸ä¸­å®ä¾‹åŒ–ä¸€ä¸ªå¯¹è±¡ï¼Œæˆ–è€…é€šè¿‡ä¿å­˜å®ä¾‹çš„ <code>__dict__</code> æ¥æ¢å¤å®ä¾‹ã€‚</p>
<div class="highlight"><pre style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#719e07">&gt;&gt;&gt;</span> <span style="color:#719e07">def</span> <span style="color:#268bd2">new_employee_from</span>(d):
<span style="color:#719e07">...</span>     instance <span style="color:#719e07">=</span> <span style="color:#b58900">object</span><span style="color:#719e07">.</span>__new__(Employee)
<span style="color:#719e07">...</span>     instance<span style="color:#719e07">.</span>__dict__<span style="color:#719e07">.</span>update(d)
<span style="color:#719e07">...</span>     <span style="color:#719e07">return</span> instance
<span style="color:#719e07">...</span>
<span style="color:#719e07">&gt;&gt;&gt;</span> e1 <span style="color:#719e07">=</span> new_employee_from({<span style="color:#2aa198">&#39;department&#39;</span>: <span style="color:#2aa198">&#39;IT&#39;</span>, <span style="color:#2aa198">&#39;name&#39;</span>: <span style="color:#2aa198">&#39;bobo&#39;</span>})
<span style="color:#719e07">&gt;&gt;&gt;</span> e1
<span style="color:#719e07">&lt;</span>Employee: IT<span style="color:#719e07">-</span>bobo<span style="color:#719e07">&gt;</span>
<span style="color:#719e07">&gt;&gt;&gt;</span> state <span style="color:#719e07">=</span> e1<span style="color:#719e07">.</span>__dict__<span style="color:#719e07">.</span>copy()
<span style="color:#719e07">&gt;&gt;&gt;</span> <span style="color:#719e07">del</span> e1
<span style="color:#719e07">&gt;&gt;&gt;</span> e2 <span style="color:#719e07">=</span> new_employee_from(state)
<span style="color:#719e07">&gt;&gt;&gt;</span> e2
<span style="color:#719e07">&gt;&gt;&gt;</span> <span style="color:#719e07">&lt;</span>Employee: IT<span style="color:#719e07">-</span>bobo<span style="color:#719e07">&gt;</span>
</code></pre></div><p>å› ä¸º <code>__dict__</code> çš„å®Œå…¨å¼€æ”¾ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥å‘å…¶ä¸­æ·»åŠ ä»»ä½• <strong>immutable</strong> ç±»å‹çš„ keyï¼Œæ¯”å¦‚æ•°å­—ï¼š</p>
<div class="highlight"><pre style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#719e07">&gt;&gt;&gt;</span> e<span style="color:#719e07">.</span>__dict__[<span style="color:#2aa198">1</span>] <span style="color:#719e07">=</span> <span style="color:#2aa198">1</span>
<span style="color:#719e07">&gt;&gt;&gt;</span> e<span style="color:#719e07">.</span>__dict__
{<span style="color:#2aa198">&#39;department&#39;</span>: <span style="color:#2aa198">&#39;IT&#39;</span>, <span style="color:#2aa198">&#39;name&#39;</span>: <span style="color:#2aa198">&#39;bobo&#39;</span>, <span style="color:#2aa198">1</span>: <span style="color:#2aa198">1</span>}
</code></pre></div><p>è¿™äº›éå­—ç¬¦ä¸²çš„å­—æ®µæ˜¯æˆ‘ä»¬æ— æ³•é€šè¿‡å®ä¾‹å¯¹è±¡è®¿é—®çš„ï¼Œä¸ºäº†ç¡®ä¿ä¸ä¼šå‡ºç°è¿™æ ·çš„æƒ…å†µï¼Œé™¤éå¿…è¦çš„æƒ…å†µä¸‹ï¼Œä¸€èˆ¬æœ€å¥½ä¸è¦ç›´æ¥å¯¹ <code>__dict__</code> è¿›è¡Œå†™æ“ä½œï¼Œç”šè‡³ä¸è¦ç›´æ¥æ“ä½œ <code>__dict__</code>ã€‚</p>
<blockquote>
<p>æ‰€ä»¥æœ‰ä¸€ç§è¯´æ³•æ˜¯ Python is a &ldquo;consenting adults language&rdquo;ã€‚</p>
</blockquote>
<p>è¿™ç§åŠ¨æ€çš„å®ç°ä½¿å¾—æˆ‘ä»¬çš„ä»£ç éå¸¸çµæ´»ï¼Œå¾ˆå¤šæ—¶å€™éå¸¸çš„ä¾¿åˆ©ï¼Œä½†è¿™ä¹Ÿä»˜å‡ºäº†å­˜å‚¨å’Œæ€§èƒ½ä¸Šçš„å¼€é”€ã€‚æ‰€ä»¥ Python ä¹Ÿæä¾›äº†å¦å¤–ä¸€ç§æœºåˆ¶(<code>__slots__</code>)æ¥æ”¾å¼ƒä½¿ç”¨ <code>__dict__</code>ï¼Œä»¥èŠ‚çº¦å†…å­˜ï¼Œæé«˜æ€§èƒ½ï¼Œè¯¦è§ <a href="#__slots__">__slots__</a> ä¸€èŠ‚ã€‚</p>
<h2 id="ç±»å±æ€§">ç±»å±æ€§</h2>
<p>åŒæ ·çš„ï¼Œç±»å±æ€§ä¹Ÿåœ¨å­˜å‚¨åœ¨ç±»çš„ <code>__dict__</code> å­—å…¸ä¸­ï¼š</p>
<div class="highlight"><pre style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#719e07">&gt;&gt;&gt;</span> Employee<span style="color:#719e07">.</span>__dict__
mappingproxy({<span style="color:#2aa198">&#39;__module__&#39;</span>: <span style="color:#2aa198">&#39;__main__&#39;</span>,
              <span style="color:#2aa198">&#39;outsource&#39;</span>: <span style="color:#268bd2">True</span>,
              <span style="color:#2aa198">&#39;__init__&#39;</span>: <span style="color:#719e07">&lt;</span>function __main__<span style="color:#719e07">.</span>Employee<span style="color:#719e07">.</span>__init__(<span style="color:#268bd2">self</span>, department, name)<span style="color:#719e07">&gt;</span>,
              <span style="color:#2aa198">&#39;inservice&#39;</span>: <span style="color:#719e07">&lt;</span><span style="color:#b58900">property</span> at <span style="color:#2aa198">0x108419ea0</span><span style="color:#719e07">&gt;</span>,
              <span style="color:#2aa198">&#39;__repr__&#39;</span>: <span style="color:#719e07">&lt;</span>function __main__<span style="color:#719e07">.</span>Employee<span style="color:#719e07">.</span>__repr__(<span style="color:#268bd2">self</span>)<span style="color:#719e07">&gt;</span>,
              <span style="color:#2aa198">&#39;__str__&#39;</span>: <span style="color:#719e07">&lt;</span>function __main__<span style="color:#719e07">.</span>Employee<span style="color:#719e07">.</span>__str__(<span style="color:#268bd2">self</span>)<span style="color:#719e07">&gt;</span>,
              <span style="color:#2aa198">&#39;__dict__&#39;</span>: <span style="color:#719e07">&lt;</span>attribute <span style="color:#2aa198">&#39;__dict__&#39;</span> of <span style="color:#2aa198">&#39;Employee&#39;</span> objects<span style="color:#719e07">&gt;</span>,
              <span style="color:#2aa198">&#39;__weakref__&#39;</span>: <span style="color:#719e07">&lt;</span>attribute <span style="color:#2aa198">&#39;__weakref__&#39;</span> of <span style="color:#2aa198">&#39;Employee&#39;</span> objects<span style="color:#719e07">&gt;</span>,
              <span style="color:#2aa198">&#39;__doc__&#39;</span>: <span style="color:#268bd2">None</span>}

<span style="color:#719e07">&gt;&gt;&gt;</span> <span style="color:#b58900">type</span>(Employee<span style="color:#719e07">.</span>__dict__)
mappingproxy
</code></pre></div><p>ä¸å®ä¾‹å­—å…¸çš„ã€å¼€æ”¾ã€ä¸åŒï¼Œç±»å±æ€§ä½¿ç”¨çš„å­—å…¸æ˜¯ä¸€ä¸ª <code>MappingProxyType</code> å¯¹è±¡ï¼Œå®ƒæ˜¯ä¸€ä¸ªä¸èƒ½ <code>setattr</code> çš„å­—å…¸ã€‚è¿™æ„å‘³ç€å®ƒå¯¹å¼€å‘è€…æ˜¯åªè¯»çš„ï¼Œå…¶ç›®çš„æ­£æ˜¯ä¸ºäº†ä¿è¯ç±»å±æ€§çš„é”®éƒ½æ˜¯å­—ç¬¦ä¸²ï¼Œä»¥ç®€åŒ–å’ŒåŠ å¿«æ–°å‹ç±»å±æ€§çš„æŸ¥æ‰¾å’Œ <code>__mro__</code> çš„æœç´¢é€»è¾‘ã€‚</p>
<div class="highlight"><pre style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#719e07">&gt;&gt;&gt;</span> Employee<span style="color:#719e07">.</span>__dict__[<span style="color:#2aa198">&#39;outsource&#39;</span>] <span style="color:#719e07">=</span> <span style="color:#268bd2">False</span>
<span style="color:#cb4b16">TypeError</span>: <span style="color:#2aa198">&#39;mappingproxy&#39;</span> <span style="color:#b58900">object</span> does <span style="color:#719e07">not</span> support item assignment
</code></pre></div><p>å› ä¸ºæ‰€æœ‰çš„æ–¹æ³•éƒ½å½’å±äºä¸€ä¸ªç±»ï¼Œæ‰€ä»¥å®ƒä»¬ä¹Ÿå­˜å‚¨åœ¨ç±»çš„å­—å…¸ä¸­ï¼Œä»ä¸Šé¢çš„ä¾‹å­ä¸­å¯ä»¥çœ‹åˆ°å·²æœ‰çš„ <code>__init__</code> å’Œ <code>__repr__</code> æ–¹æ³•ã€‚æˆ‘ä»¬å¯ä»¥å†æ·»åŠ å‡ ä¸ªæ¥éªŒè¯ï¼š</p>
<div class="highlight"><pre style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#719e07">class</span> <span style="color:#268bd2">Employee</span>:
    <span style="color:#586e75"># ...</span>
    <span style="color:#268bd2">@staticmethod</span>
    <span style="color:#719e07">def</span> <span style="color:#268bd2">soo</span>():
        <span style="color:#719e07">pass</span>

    <span style="color:#268bd2">@classmethod</span>
    <span style="color:#719e07">def</span> <span style="color:#268bd2">coo</span>(<span style="color:#268bd2">cls</span>):
        <span style="color:#719e07">pass</span>

    <span style="color:#719e07">def</span> <span style="color:#268bd2">foo</span>(<span style="color:#268bd2">self</span>):
        <span style="color:#719e07">pass</span>
</code></pre></div><div class="highlight"><pre style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#719e07">&gt;&gt;&gt;</span> Employee<span style="color:#719e07">.</span>__dict__
mappingproxy({<span style="color:#2aa198">&#39;__module__&#39;</span>: <span style="color:#2aa198">&#39;__main__&#39;</span>,
              <span style="color:#2aa198">&#39;outsource&#39;</span>: <span style="color:#268bd2">False</span>,
              <span style="color:#2aa198">&#39;__init__&#39;</span>: <span style="color:#719e07">&lt;</span>function __main__<span style="color:#719e07">.</span>Employee<span style="color:#719e07">.</span>__init__(<span style="color:#268bd2">self</span>, department, name)<span style="color:#719e07">&gt;</span>,
              <span style="color:#2aa198">&#39;__repr__&#39;</span>: <span style="color:#719e07">&lt;</span>function __main__<span style="color:#719e07">.</span>Employee<span style="color:#719e07">.</span>__repr__(<span style="color:#268bd2">self</span>)<span style="color:#719e07">&gt;</span>,
              <span style="color:#2aa198">&#39;inservice&#39;</span>: <span style="color:#719e07">&lt;</span><span style="color:#b58900">property</span> at <span style="color:#2aa198">0x108419ea0</span><span style="color:#719e07">&gt;</span>,
              <span style="color:#2aa198">&#39;soo&#39;</span>: <span style="color:#719e07">&lt;</span><span style="color:#b58900">staticmethod</span> at <span style="color:#2aa198">0x1066ce588</span><span style="color:#719e07">&gt;</span>,
              <span style="color:#2aa198">&#39;coo&#39;</span>: <span style="color:#719e07">&lt;</span><span style="color:#b58900">classmethod</span> at <span style="color:#2aa198">0x1066ce828</span><span style="color:#719e07">&gt;</span>,
              <span style="color:#2aa198">&#39;foo&#39;</span>: <span style="color:#719e07">&lt;</span>function __main__<span style="color:#719e07">.</span>Employee<span style="color:#719e07">.</span>foo(<span style="color:#268bd2">self</span>)<span style="color:#719e07">&gt;</span>,
              <span style="color:#2aa198">&#39;__dict__&#39;</span>: <span style="color:#719e07">&lt;</span>attribute <span style="color:#2aa198">&#39;__dict__&#39;</span> of <span style="color:#2aa198">&#39;Employee&#39;</span> objects<span style="color:#719e07">&gt;</span>,
              <span style="color:#2aa198">&#39;__weakref__&#39;</span>: <span style="color:#719e07">&lt;</span>attribute <span style="color:#2aa198">&#39;__weakref__&#39;</span> of <span style="color:#2aa198">&#39;Employee&#39;</span> objects<span style="color:#719e07">&gt;</span>,
              <span style="color:#2aa198">&#39;__doc__&#39;</span>: <span style="color:#268bd2">None</span>})
</code></pre></div><h1 id="ç»§æ‰¿ä¸å±æ€§æŸ¥æ‰¾">ç»§æ‰¿ä¸å±æ€§æŸ¥æ‰¾</h1>
<p>ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘ä»¬å·²ç»çŸ¥é“ï¼Œæ‰€æœ‰çš„å±æ€§å’Œæ–¹æ³•éƒ½å­˜å‚¨åœ¨ä¸¤ä¸ª <code>__dict__</code> å­—å…¸ä¸­ï¼Œç°åœ¨æˆ‘ä»¬æ¥çœ‹çœ‹ Python æ˜¯å¦‚ä½•è¿›è¡Œå±æ€§æŸ¥æ‰¾çš„ã€‚</p>
<p>Python 3 ä¸­ï¼Œæ‰€æœ‰ç±»éƒ½éšå¼çš„ç»§æ‰¿è‡ª <code>object</code>ï¼Œæ‰€ä»¥æ€»ä¼šæœ‰ä¸€ä¸ªç»§æ‰¿å…³ç³»ï¼Œè€Œä¸” Python æ˜¯æ”¯æŒå¤šç»§æ‰¿çš„ï¼š</p>
<div class="highlight"><pre style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#719e07">&gt;&gt;&gt;</span> <span style="color:#719e07">class</span> <span style="color:#268bd2">A</span>:
<span style="color:#719e07">...</span>     <span style="color:#719e07">pass</span>
<span style="color:#719e07">...</span>
<span style="color:#719e07">&gt;&gt;&gt;</span> <span style="color:#719e07">class</span> <span style="color:#268bd2">B</span>:
<span style="color:#719e07">...</span>     <span style="color:#719e07">pass</span>
<span style="color:#719e07">...</span>
<span style="color:#719e07">&gt;&gt;&gt;</span> <span style="color:#719e07">class</span> <span style="color:#268bd2">C</span>(B):
<span style="color:#719e07">...</span>     <span style="color:#719e07">pass</span>
<span style="color:#719e07">...</span>
<span style="color:#719e07">&gt;&gt;&gt;</span> <span style="color:#719e07">class</span> <span style="color:#268bd2">D</span>(A, C):
<span style="color:#719e07">...</span>     <span style="color:#719e07">pass</span>
<span style="color:#719e07">...</span>
<span style="color:#719e07">&gt;&gt;&gt;</span> D<span style="color:#719e07">.</span>mro()
[<span style="color:#719e07">&lt;</span><span style="color:#719e07">class</span> &#39;<span style="color:#268bd2">__main__</span><span style="color:#719e07">.</span>D<span style="color:#2aa198">&#39;&gt;, &lt;class &#39;</span>__main__<span style="color:#719e07">.</span>A<span style="color:#2aa198">&#39;&gt;, &lt;class &#39;</span>__main__<span style="color:#719e07">.</span>C<span style="color:#2aa198">&#39;&gt;, &lt;class &#39;</span>__main__<span style="color:#719e07">.</span><span style="color:#2aa198">B</span><span style="color:#2aa198">&#39;&gt;, &lt;class &#39;</span><span style="color:#b58900">object</span><span style="color:#2aa198">&#39;&gt;]</span>
</code></pre></div><p><code>mro()</code> æ˜¯ä¸€ä¸ªç‰¹æ®Šçš„æ–¹æ³•ï¼Œå®ƒè¿”å›ç±»çš„çº¿æ€§è§£æé¡ºåºã€‚</p>
<p>å±æ€§è®¿é—®çš„é»˜è®¤è¡Œä¸ºæ˜¯ä»å¯¹è±¡çš„å­—å…¸ä¸­è·å–ã€è®¾ç½®æˆ–åˆ é™¤å±æ€§ï¼Œä¾‹å¦‚å¯¹äº <code>e.f</code> çš„æŸ¥æ‰¾ç®€å•æè¿°æ˜¯:</p>
<blockquote>
<p><code>e.f</code> çš„æŸ¥æ‰¾é¡ºåºä¼šä» <code>e.__dict__['f']</code> å¼€å§‹ï¼Œç„¶åæ˜¯ <code>type(e).__dict__['f']</code>ï¼Œæ¥ä¸‹æ¥ä¾æ¬¡æŸ¥æ‰¾ <code>type(e)</code> çš„åŸºç±»ï¼ˆ<code>__mro__</code> é¡ºåºï¼Œä¸åŒ…æ‹¬å…ƒç±»ï¼‰ã€‚ å¦‚æœ<strong>æ‰¾åˆ°çš„å€¼æ˜¯å®šä¹‰äº†æŸä¸ª<u>æè¿°å™¨æ–¹æ³•</u>çš„å¯¹è±¡ï¼Œåˆ™ Python å¯èƒ½ä¼šé‡è½½é»˜è®¤è¡Œä¸ºå¹¶è½¬è€Œå‘èµ·è°ƒç”¨æè¿°å™¨æ–¹æ³•</strong>ã€‚è¿™å…·ä½“å‘ç”Ÿåœ¨ä¼˜å…ˆçº§é“¾çš„å“ªä¸ªç¯èŠ‚åˆ™è¦æ ¹æ®æ‰€å®šä¹‰çš„æè¿°å™¨æ–¹æ³•åŠå…¶è¢«è°ƒç”¨çš„æ–¹å¼æ¥å†³å®šã€‚</p>
</blockquote>
<p>æ‰€ä»¥ï¼Œè¦ç†è§£æŸ¥æ‰¾çš„é¡ºåºï¼Œä½ å¿…é¡»è¦å…ˆäº†è§£<a href="https://docs.python.org/zh-cn/3/howto/descriptor.html#descriptor-protocol">æè¿°å™¨åè®®</a>ã€‚</p>
<p>ç®€å•æ€»ç»“ï¼Œæœ‰ä¸¤ç§æè¿°å™¨ç±»å‹ï¼šæ•°æ®æè¿°å™¨å’Œå’Œéæ•°æ®æè¿°å™¨ã€‚</p>
<blockquote>
<p>å¦‚æœä¸€ä¸ªå¯¹è±¡é™¤äº†å®šä¹‰ <code>__get__()</code> ä¹‹å¤–è¿˜å®šä¹‰äº† <code>__set__()</code> æˆ– <code>__delete__()</code>ï¼Œåˆ™å®ƒä¼šè¢«è§†ä¸ºæ•°æ®æè¿°å™¨ã€‚ä»…å®šä¹‰äº† <code>__get__()</code> çš„æè¿°å™¨ç§°ä¸ºéæ•°æ®æè¿°å™¨ï¼ˆå®ƒä»¬é€šå¸¸è¢«ç”¨äºæ–¹æ³•ï¼Œä½†ä¹Ÿå¯ä»¥æœ‰å…¶ä»–ç”¨é€”)</p>
</blockquote>
<p>ç”±äºå‡½æ•°åªå®ç° <code>__get__</code>ï¼Œæ‰€ä»¥å®ƒä»¬æ˜¯éæ•°æ®æè¿°å™¨ã€‚</p>
<p>Python çš„å¯¹è±¡å±æ€§æŸ¥æ‰¾é¡ºåºå¦‚ä¸‹ï¼š</p>
<ol>
<li>ç±»å’Œçˆ¶ç±»å­—å…¸çš„æ•°æ®æè¿°å™¨</li>
<li>å®ä¾‹å­—å…¸</li>
<li>ç±»å’Œçˆ¶ç±»å­—å…¸ä¸­çš„éæ•°æ®æè¿°å™¨</li>
</ol>
<p>è¯·è®°ä½ï¼Œæ— è®ºä½ çš„ç±»æœ‰å¤šå°‘ä¸ªç»§æ‰¿çº§åˆ«ï¼Œè¯¥ç±»å¯¹è±¡çš„å®ä¾‹å­—å…¸æ€»æ˜¯å­˜å‚¨äº†æ‰€æœ‰çš„å®ä¾‹å˜é‡ï¼Œè¿™ä¹Ÿæ˜¯ <code>super</code> çš„æ„ä¹‰ä¹‹ä¸€ã€‚</p>
<p>ä¸‹é¢æˆ‘ä»¬å°è¯•ç”¨ä¼ªä»£ç æ¥æè¿°æŸ¥æ‰¾é¡ºåºï¼š</p>
<div class="highlight"><pre style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#719e07">def</span> <span style="color:#268bd2">get_attribute</span>(obj, name):
    class_definition <span style="color:#719e07">=</span> obj<span style="color:#719e07">.</span>__class__

    descriptor <span style="color:#719e07">=</span> <span style="color:#268bd2">None</span>
    <span style="color:#719e07">for</span> <span style="color:#268bd2">cls</span> <span style="color:#719e07">in</span> class_definition<span style="color:#719e07">.</span>mro():
        <span style="color:#719e07">if</span> name <span style="color:#719e07">in</span> <span style="color:#268bd2">cls</span><span style="color:#719e07">.</span>__dict__:
            descriptor <span style="color:#719e07">=</span> <span style="color:#268bd2">cls</span><span style="color:#719e07">.</span>__dict__[name]
            <span style="color:#719e07">break</span>

    <span style="color:#719e07">if</span> <span style="color:#b58900">hasattr</span>(descriptor, <span style="color:#2aa198">&#39;__set__&#39;</span>):
        <span style="color:#719e07">return</span> descriptor, <span style="color:#2aa198">&#39;data descriptor&#39;</span>

    <span style="color:#719e07">if</span> name <span style="color:#719e07">in</span> obj<span style="color:#719e07">.</span>__dict__:
        <span style="color:#719e07">return</span> obj<span style="color:#719e07">.</span>__dict__[name], <span style="color:#2aa198">&#39;instance attribute&#39;</span>

    <span style="color:#719e07">if</span> descriptor <span style="color:#719e07">is</span> <span style="color:#719e07">not</span> <span style="color:#268bd2">None</span>:
        <span style="color:#719e07">return</span> descriptor, <span style="color:#2aa198">&#39;non-data descriptor&#39;</span>
    <span style="color:#719e07">else</span>:
        <span style="color:#719e07">raise</span> <span style="color:#cb4b16">AttributeError</span>
</code></pre></div><div class="highlight"><pre style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#719e07">&gt;&gt;&gt;</span> e <span style="color:#719e07">=</span> Employee(<span style="color:#2aa198">&#39;IT&#39;</span>, <span style="color:#2aa198">&#39;bobo&#39;</span>)
<span style="color:#719e07">&gt;&gt;&gt;</span> get_attribute(e, <span style="color:#2aa198">&#39;outsource&#39;</span>)
(<span style="color:#268bd2">False</span>, <span style="color:#2aa198">&#39;non-data descriptor&#39;</span>)
<span style="color:#719e07">&gt;&gt;&gt;</span> e<span style="color:#719e07">.</span>outsource <span style="color:#719e07">=</span> <span style="color:#268bd2">True</span>
<span style="color:#719e07">&gt;&gt;&gt;</span> get_attribute(e, <span style="color:#2aa198">&#39;outsource&#39;</span>)
(<span style="color:#268bd2">True</span>, <span style="color:#2aa198">&#39;instance attribute&#39;</span>)
<span style="color:#719e07">&gt;&gt;&gt;</span> get_attribute(e, <span style="color:#2aa198">&#39;name&#39;</span>)
(<span style="color:#2aa198">&#39;bobo&#39;</span>, <span style="color:#2aa198">&#39;instance attribute&#39;</span>)
<span style="color:#719e07">&gt;&gt;&gt;</span> get_attribute(e, <span style="color:#2aa198">&#39;inservice&#39;</span>)
(<span style="color:#719e07">&lt;</span><span style="color:#b58900">property</span> at <span style="color:#2aa198">0x10c966d10</span><span style="color:#719e07">&gt;</span>, <span style="color:#2aa198">&#39;data descriptor&#39;</span>)
<span style="color:#719e07">&gt;&gt;&gt;</span> get_attribute(e, <span style="color:#2aa198">&#39;foo&#39;</span>)
(<span style="color:#719e07">&lt;</span>function __main__<span style="color:#719e07">.</span>Employee<span style="color:#719e07">.</span>foo(<span style="color:#268bd2">self</span>)<span style="color:#719e07">&gt;</span>, <span style="color:#2aa198">&#39;non-data descriptor&#39;</span>)
</code></pre></div><p>ç”±äºè¿™æ ·çš„ä¼˜å…ˆçº§é¡ºåºï¼Œæ‰€ä»¥å®ä¾‹æ˜¯ä¸èƒ½é‡è½½ç±»çš„æ•°æ®æè¿°å™¨å±æ€§çš„ï¼Œæ¯”å¦‚ <code>property</code> å±æ€§ï¼š</p>
<div class="highlight"><pre style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#719e07">&gt;&gt;&gt;</span> <span style="color:#719e07">class</span> <span style="color:#268bd2">Manager</span>(Employee):
<span style="color:#719e07">...</span>     <span style="color:#719e07">def</span> __init__(<span style="color:#268bd2">self</span>, <span style="color:#719e07">*</span>arg):
<span style="color:#719e07">...</span>         <span style="color:#268bd2">self</span><span style="color:#719e07">.</span>inservice <span style="color:#719e07">=</span> <span style="color:#268bd2">True</span>
<span style="color:#719e07">...</span>         <span style="color:#b58900">super</span>()<span style="color:#719e07">.</span>__init__(<span style="color:#719e07">*</span>arg)
<span style="color:#719e07">...</span>
<span style="color:#719e07">&gt;&gt;&gt;</span> m <span style="color:#719e07">=</span> Manager(<span style="color:#2aa198">&#34;HR&#34;</span>, <span style="color:#2aa198">&#34;cici&#34;</span>)
<span style="color:#cb4b16">AttributeError</span>: can<span style="color:#2aa198">&#39;t set attribute</span>
</code></pre></div><h2 id="å‘èµ·æè¿°å™¨è°ƒç”¨">å‘èµ·æè¿°å™¨è°ƒç”¨</h2>
<p>ä¸Šé¢è®²åˆ°ï¼Œåœ¨æŸ¥æ‰¾å±æ€§æ—¶ï¼Œå¦‚æœæ‰¾åˆ°çš„å€¼æ˜¯å®šä¹‰äº†æŸä¸ªæè¿°å™¨æ–¹æ³•çš„å¯¹è±¡ï¼Œåˆ™ Python å¯èƒ½ä¼šé‡è½½é»˜è®¤è¡Œä¸ºå¹¶è½¬è€Œå‘èµ·æè¿°å™¨æ–¹æ³•è°ƒç”¨ã€‚</p>
<p>æè¿°å™¨çš„ä½œç”¨å°±æ˜¯ç»‘å®šå¯¹è±¡å±æ€§ï¼Œæˆ‘ä»¬å‡è®¾ <code>a</code> æ˜¯ä¸€ä¸ªå®ç°äº†æè¿°å™¨åè®®çš„å¯¹è±¡ï¼Œå¯¹ <code>e.a</code> å‘èµ·æè¿°å™¨è°ƒç”¨æœ‰ä»¥ä¸‹å‡ ç§æƒ…å†µï¼š</p>
<ul>
<li>ç›´æ¥è°ƒç”¨ï¼šç”¨æˆ·çº§çš„ä»£ç ç›´æ¥è°ƒç”¨<code>e.__get__(a)</code>ï¼Œä¸å¸¸ç”¨</li>
<li>å®ä¾‹ç»‘å®šï¼šç»‘å®šåˆ°ä¸€ä¸ªå®ä¾‹ï¼Œ<code>e.a</code> ä¼šè¢«è½¬æ¢ä¸ºè°ƒç”¨: <code>type(e).__dict__['a'].__get__(e, type(e))</code></li>
<li>ç±»ç»‘å®šï¼šç»‘å®šåˆ°ä¸€ä¸ªç±»ï¼Œ<code>E.a</code> ä¼šè¢«è½¬æ¢ä¸ºè°ƒç”¨: <code>E.__dict__['a'].__get__(None, E)</code></li>
</ul>
<p>åœ¨ç»§æ‰¿å…³ç³»ä¸­è¿›è¡Œç»‘å®šæ—¶ï¼Œä¼šæ ¹æ®ä»¥ä¸Šæƒ…å†µå’Œ <code>__mro__</code> é¡ºåºæ¥å‘èµ·é“¾å¼è°ƒç”¨ã€‚</p>
<h1 id="å‡½æ•°ä¸æ–¹æ³•">å‡½æ•°ä¸æ–¹æ³•</h1>
<p>æˆ‘ä»¬çŸ¥é“<u><strong>æ–¹æ³•æ˜¯å±äºç‰¹å®šç±»çš„å‡½æ•°</strong></u>ï¼Œå”¯ä¸€çš„ä¸åŒ(å¦‚æœå¯ä»¥ç®—æ˜¯ä¸åŒçš„è¯)æ˜¯æ–¹æ³•çš„ç¬¬ä¸€ä¸ªå‚æ•°å¾€å¾€æ˜¯ä¸ºç±»æˆ–å®ä¾‹å¯¹è±¡ä¿ç•™çš„ï¼Œåœ¨ Python ä¸­ï¼Œæˆ‘ä»¬çº¦å®šä¸º <code>cls</code> æˆ– <code>self</code>, å½“ç„¶ä½ ä¹Ÿå¯ä»¥å–ä»»ä½•åå­—å¦‚ <code>this</code>(åªæ˜¯æœ€å¥½ä¸è¦è¿™æ ·åš)ã€‚</p>
<p>ä¸Šä¸€èŠ‚æˆ‘ä»¬çŸ¥é“ï¼Œå‡½æ•°å®ç°äº† <code>__get__()</code> æ–¹æ³•çš„å¯¹è±¡ï¼Œæ‰€ä»¥å®ƒä»¬æ˜¯éæ•°æ®æè¿°å™¨ã€‚åœ¨ Python è®¿é—®(è°ƒç”¨)æ–¹æ³•æ”¯æŒä¸­æ­£æ˜¯é€šè¿‡è°ƒç”¨ <code>__get__()</code> å°†è°ƒç”¨çš„å‡½æ•°ç»‘å®šæˆæ–¹æ³•çš„ã€‚</p>
<p>åœ¨çº¯ Python ä¸­ï¼Œå®ƒçš„å·¥ä½œæ–¹å¼å¦‚ä¸‹(ç¤ºä¾‹æ¥è‡ª<a href="https://docs.python.org/zh-cn/3/howto/descriptor.html">æè¿°å™¨ä½¿ç”¨æŒ‡å—</a>):</p>
<div class="highlight"><pre style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#719e07">class</span> <span style="color:#268bd2">Function</span>:
    <span style="color:#719e07">def</span> __get__(<span style="color:#268bd2">self</span>, obj, objtype<span style="color:#719e07">=</span><span style="color:#268bd2">None</span>):
        <span style="color:#719e07">if</span> obj <span style="color:#719e07">is</span> <span style="color:#268bd2">None</span>:
            <span style="color:#719e07">return</span> <span style="color:#268bd2">self</span>
        <span style="color:#719e07">return</span> types<span style="color:#719e07">.</span>MethodType(<span style="color:#268bd2">self</span>, obj) <span style="color:#586e75"># å°†å‡½æ•°ç»‘å®šä¸ºæ–¹æ³•</span>
</code></pre></div><p>åœ¨ Python 2 ä¸­ï¼Œæœ‰ä¸¤ç§æ–¹æ³•: unbound method å’Œ bound methodï¼Œåœ¨ Python 3 ä¸­åªæœ‰åè€…ã€‚</p>
<p>bound method ä¸å®ƒä»¬ç»‘å®šçš„ç±»æˆ–å®ä¾‹æ•°æ®ç›¸å…³è”ï¼š</p>
<div class="highlight"><pre style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#719e07">&gt;&gt;&gt;</span> Employee<span style="color:#719e07">.</span>coo
<span style="color:#719e07">&lt;</span>bound method Employee<span style="color:#719e07">.</span>coo of <span style="color:#719e07">&lt;</span><span style="color:#719e07">class</span> &#39;<span style="color:#268bd2">__main__</span><span style="color:#719e07">.</span>Employee<span style="color:#2aa198">&#39;&gt;&gt;</span>
<span style="color:#719e07">&gt;&gt;&gt;</span> Employee<span style="color:#719e07">.</span>foo
<span style="color:#719e07">&lt;</span>function __main__<span style="color:#719e07">.</span>Employee<span style="color:#719e07">.</span>foo(<span style="color:#268bd2">self</span>)<span style="color:#719e07">&gt;</span>
<span style="color:#719e07">&gt;&gt;&gt;</span> e <span style="color:#719e07">=</span> Employee(<span style="color:#2aa198">&#39;IT&#39;</span>, <span style="color:#2aa198">&#39;bobo&#39;</span>)
<span style="color:#719e07">&gt;&gt;&gt;</span> e<span style="color:#719e07">.</span>foo
<span style="color:#719e07">&lt;</span>bound method Employee<span style="color:#719e07">.</span>foo of <span style="color:#719e07">&lt;</span>Employee: IT<span style="color:#719e07">-</span>bobo<span style="color:#719e07">&gt;&gt;</span>
</code></pre></div><p>æˆ‘ä»¬å¯ä»¥ä»<strong>æ–¹æ³•</strong>æ¥è®¿é—®å®ä¾‹ä¸ç±»ï¼š</p>
<div class="highlight"><pre style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#719e07">&gt;&gt;&gt;</span> e<span style="color:#719e07">.</span>foo<span style="color:#719e07">.</span>__self__
<span style="color:#719e07">&lt;</span>Employee: IT<span style="color:#719e07">-</span>bobo<span style="color:#719e07">&gt;</span>
<span style="color:#719e07">&gt;&gt;&gt;</span> e<span style="color:#719e07">.</span>foo<span style="color:#719e07">.</span>__self__<span style="color:#719e07">.</span>__class__
__main__<span style="color:#719e07">.</span>Employee
</code></pre></div><p>å€ŸåŠ©æè¿°ç¬¦åè®®ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ç±»çš„å¤–éƒ¨ä½œç”¨åŸŸæ‰‹åŠ¨ç»‘å®šä¸€ä¸ªå‡½æ•°åˆ°æ–¹æ³•ï¼Œä»¥è®¿é—®ç±»æˆ–å®ä¾‹ä¸­çš„æ•°æ®ï¼Œ<strong>æˆ‘å°†ä»¥è¿™ä¸ªç¤ºä¾‹æ¥è§£é‡Šå½“ä½ çš„å¯¹è±¡è®¿é—®(è°ƒç”¨)ç±»å­—å…¸ä¸­å­˜å‚¨çš„å‡½æ•°æ—¶å°†å…¶ç»‘å®šæˆæ–¹æ³•(æ‰§è¡Œ)çš„è¿‡ç¨‹</strong>ï¼š</p>
<p>ç°æœ‰ä»¥ä¸‹å‡½æ•°ï¼š</p>
<div class="highlight"><pre style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#719e07">&gt;&gt;&gt;</span> <span style="color:#719e07">def</span> <span style="color:#268bd2">f1</span>(<span style="color:#268bd2">self</span>):
<span style="color:#719e07">...</span>     <span style="color:#719e07">if</span> <span style="color:#b58900">isinstance</span>(<span style="color:#268bd2">self</span>, <span style="color:#b58900">type</span>):
<span style="color:#719e07">...</span>         <span style="color:#719e07">return</span> <span style="color:#268bd2">self</span><span style="color:#719e07">.</span>outsource
<span style="color:#719e07">...</span>     <span style="color:#719e07">return</span> <span style="color:#268bd2">self</span><span style="color:#719e07">.</span>name
<span style="color:#719e07">...</span>
<span style="color:#719e07">&gt;&gt;&gt;</span> bound_f1 <span style="color:#719e07">=</span> f1<span style="color:#719e07">.</span>__get__(e, Employee) <span style="color:#586e75"># or bound_f1 = f1.__get__(e)</span>
<span style="color:#719e07">&gt;&gt;&gt;</span> bound_f1
<span style="color:#719e07">&lt;</span>bound method f1 of <span style="color:#719e07">&lt;</span>Employee: IT<span style="color:#719e07">-</span>bobo<span style="color:#719e07">&gt;&gt;</span>
<span style="color:#719e07">&gt;&gt;&gt;</span> bound_f1<span style="color:#719e07">.</span>__self__
<span style="color:#719e07">&lt;</span>Employee: IT<span style="color:#719e07">-</span>bobo<span style="color:#719e07">&gt;</span>
<span style="color:#719e07">&gt;&gt;&gt;</span> bound_f1()
<span style="color:#2aa198">&#39;bobo&#39;</span>
</code></pre></div><p>æ€»ç»“ä¸€ä¸‹ï¼šå½“æˆ‘ä»¬è°ƒç”¨ <code>e.foo()</code> æ—¶ï¼Œé¦–å…ˆä» <code>Employee.__dict__['foo']</code> ä¸­å¾—åˆ° <code>foo</code> å‡½æ•°ï¼Œåœ¨è°ƒç”¨è¯¥å‡½æ•°çš„ <code>foo</code> æ–¹æ³• <code>foo.__get__(e)</code> å°†å…¶è½¬æ¢æˆæ–¹æ³•ï¼Œç„¶åæ‰§è¡Œ <code>foo()</code> è·å¾—ç»“æœã€‚è¿™å°±å®Œæˆäº† <code>e.foo()</code> -&gt; <code>f(e)</code> çš„è¿‡ç¨‹ã€‚</p>
<p>å¦‚æœä½ å¯¹æˆ‘çš„è§£é‡Šæ„Ÿåˆ°ç–‘æƒ‘ï¼Œæˆ‘å»ºè®®ä½ å¯ä»¥é˜…è¯»å®˜æ–¹çš„<a href="https://docs.python.org/zh-cn/3/howto/descriptor.html">æè¿°å™¨ä½¿ç”¨æŒ‡å—</a>ä»¥è¿›ä¸€æ­¥äº†è§£æè¿°å™¨åè®®ï¼Œåœ¨è¯¥æ–‡çš„<a href="https://docs.python.org/zh-cn/3/howto/descriptor.html#functions-and-methods">å‡½æ•°å’Œæ–¹æ³•</a>å’Œ<a href="https://docs.python.org/zh-cn/3/howto/descriptor.html#static-methods-and-class-methods">é™æ€æ–¹æ³•å’Œç±»æ–¹æ³•</a>ä¸€èŠ‚ä¸­è¯¦ç»†äº†è§£å‡½æ•°ç»‘å®šä¸ºæ–¹æ³•çš„è¿‡ç¨‹ã€‚åŒæ—¶åœ¨ Python <a href="https://docs.python.org/zh-cn/3.9/tutorial/classes.html">ç±»</a>ä¸€æ–‡çš„<a href="https://docs.python.org/zh-cn/3.9/tutorial/classes.html#method-objects">æ–¹æ³•å¯¹è±¡</a>ä¸€èŠ‚ä¸­ä¹Ÿæœ‰ç›¸å…³çš„è§£é‡Šã€‚</p>
<h1 id="__slots__">__slots__</h1>
<p>Python çš„å¯¹è±¡å±æ€§å€¼éƒ½æ˜¯é‡‡ç”¨å­—å…¸å­˜å‚¨çš„ï¼Œå½“æˆ‘ä»¬å¤„ç†æ•°æˆåƒä¸Šä¸‡ç”šè‡³æ›´å¤šçš„å®ä¾‹æ—¶ï¼Œå†…å­˜æ¶ˆè€—å¯èƒ½æ˜¯ä¸€ä¸ªé—®é¢˜ï¼Œå› ä¸ºå­—å…¸å“ˆå¸Œè¡¨çš„å®ç°ï¼Œæ€»æ˜¯ä¸ºæ¯ä¸ªå®ä¾‹åˆ›å»ºäº†å¤§é‡çš„å†…å­˜ã€‚æ‰€ä»¥ Python æä¾›äº†ä¸€ç§ <a href="https://docs.python.org/zh-cn/3/reference/datamodel.html#slots">__slots__</a> çš„æ–¹å¼æ¥ç¦ç”¨å®ä¾‹ä½¿ç”¨ <code>__dict__</code>ï¼Œä»¥ä¼˜åŒ–æ­¤é—®é¢˜ã€‚</p>
<p>é€šè¿‡ <code>__slots__</code> æ¥æŒ‡å®šå±æ€§åï¼Œä¼šå°†å±æ€§çš„å­˜å‚¨ä»å®ä¾‹çš„ <code>__dict__</code> æ”¹ä¸ºç±»çš„ <code>__dict__</code> ä¸­ï¼š</p>
<div class="highlight"><pre style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#719e07">class</span> <span style="color:#268bd2">Test</span>:
    __slots__ <span style="color:#719e07">=</span> (<span style="color:#2aa198">&#39;a&#39;</span>, <span style="color:#2aa198">&#39;b&#39;</span>)

    <span style="color:#719e07">def</span> __init__(<span style="color:#268bd2">self</span>, a, b):
        <span style="color:#268bd2">self</span><span style="color:#719e07">.</span>a <span style="color:#719e07">=</span> a
        <span style="color:#268bd2">self</span><span style="color:#719e07">.</span>b <span style="color:#719e07">=</span> b
</code></pre></div><div class="highlight"><pre style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#719e07">&gt;&gt;&gt;</span> t <span style="color:#719e07">=</span> Test(<span style="color:#2aa198">1</span>, <span style="color:#2aa198">2</span>)
<span style="color:#719e07">&gt;&gt;&gt;</span> t<span style="color:#719e07">.</span>__dict__
<span style="color:#cb4b16">AttributeError</span>: <span style="color:#2aa198">&#39;Test&#39;</span> <span style="color:#b58900">object</span> has no attribute <span style="color:#2aa198">&#39;__dict__&#39;</span>
<span style="color:#719e07">&gt;&gt;&gt;</span> Test<span style="color:#719e07">.</span>__dict__
mappingproxy({<span style="color:#2aa198">&#39;__module__&#39;</span>: <span style="color:#2aa198">&#39;__main__&#39;</span>,
              <span style="color:#2aa198">&#39;__slots__&#39;</span>: (<span style="color:#2aa198">&#39;a&#39;</span>, <span style="color:#2aa198">&#39;b&#39;</span>),
              <span style="color:#2aa198">&#39;__init__&#39;</span>: <span style="color:#719e07">&lt;</span>function __main__<span style="color:#719e07">.</span>Test<span style="color:#719e07">.</span>__init__(<span style="color:#268bd2">self</span>, a, b)<span style="color:#719e07">&gt;</span>,
              <span style="color:#2aa198">&#39;a&#39;</span>: <span style="color:#719e07">&lt;</span>member <span style="color:#2aa198">&#39;a&#39;</span> of <span style="color:#2aa198">&#39;Test&#39;</span> objects<span style="color:#719e07">&gt;</span>,
              <span style="color:#2aa198">&#39;b&#39;</span>: <span style="color:#719e07">&lt;</span>member <span style="color:#2aa198">&#39;b&#39;</span> of <span style="color:#2aa198">&#39;Test&#39;</span> objects<span style="color:#719e07">&gt;</span>,
              <span style="color:#2aa198">&#39;__doc__&#39;</span>: <span style="color:#268bd2">None</span>})
</code></pre></div><p>å…³äº __slots__ æˆ‘ä¹‹å‰ä¸“é—¨å†™è¿‡ä¸€ç¯‡æ–‡ç« åˆ†äº«è¿‡ï¼Œæ„Ÿå…´è¶£çš„åŒå­¦è¯·ç§»æ­¥<a href="/posts/py-slots/">ç†è§£ Python ç±»å±æ€§ __slots__</a> ä¸€æ–‡ã€‚</p>
<h1 id="è¡¥å……">è¡¥å……</h1>
<h2 id="__getattribute__-å’Œ-__getattr__">__getattribute__ å’Œ __getattr__</h2>
<p>ä¹Ÿè®¸ä½ è¿˜æœ‰ç–‘é—®ï¼Œé‚£å‡½æ•°çš„ <code>__get__</code> æ–¹æ³•æ˜¯æ€ä¹ˆè¢«è°ƒç”¨çš„å‘¢ï¼Œè¿™ä¸­é—´è¿‡ç¨‹æ˜¯ä»€ä¹ˆæ ·çš„ï¼Ÿ</p>
<p>åœ¨ Python ä¸­ ä¸€åˆ‡çš†å¯¹è±¡ï¼Œæ‰€æœ‰å¯¹è±¡éƒ½æœ‰ä¸€ä¸ªé»˜è®¤çš„æ–¹æ³• <code>__getattribute__(self, name)</code>ã€‚</p>
<p>è¯¥æ–¹æ³•ä¼šåœ¨æˆ‘ä»¬ä½¿ç”¨ <code>.</code> è®¿é—® <code>obj</code> çš„å±æ€§æ—¶ä¼šè‡ªåŠ¨è°ƒç”¨ï¼Œä¸ºäº†é˜²æ­¢é€’å½’è°ƒç”¨ï¼Œå®ƒæ€»æ˜¯å®ç°ä¸ºä»åŸºç±» <code>object</code> ä¸­è·å– <code>object.__getattribute__(self, name)</code>, è¯¥æ–¹æ³•å¤§éƒ¨åˆ†æƒ…å†µä¸‹ä¼šé»˜è®¤ä» <code>self</code> çš„ <code>__dict__</code> å­—å…¸ä¸­æŸ¥æ‰¾ <code>name</code>(é™¤äº†<a href="https://docs.python.org/zh-cn/3/reference/datamodel.html#special-lookup">ç‰¹æ®Šæ–¹æ³•çš„æŸ¥æ‰¾</a>)ã€‚</p>
<blockquote>
<p>è¯å¤–ï¼šå¦‚æœè¯¥ç±»è¿˜å®ç°äº† <code>__getattr__</code>ï¼Œ<strong>åˆ™åªæœ‰ <code>__getattribute__</code> æ˜¾å¼åœ°è°ƒç”¨æˆ–æ˜¯å¼•å‘äº† <code>AttributeError</code> å¼‚å¸¸åæ‰ä¼šè¢«è°ƒç”¨</strong>ã€‚<code>__getattr__</code> ç”±å¼€å‘è€…è‡ªå·±å®ç°ï¼Œåº”å½“è¿”å›å±æ€§å€¼æˆ–å¼•å‘ <code>AttributeError</code> å¼‚å¸¸ã€‚</p>
</blockquote>
<p>è€Œæè¿°å™¨æ­£æ˜¯ç”± <code>__getattribute__()</code> æ–¹æ³•è°ƒç”¨ï¼Œå…¶å¤§è‡´é€»è¾‘ä¸ºï¼š</p>
<div class="highlight"><pre style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#719e07">def</span> __getattribute__(<span style="color:#268bd2">self</span>, key):
    v <span style="color:#719e07">=</span> <span style="color:#b58900">object</span><span style="color:#719e07">.</span>__getattribute__(<span style="color:#268bd2">self</span>, key)
    <span style="color:#719e07">if</span> <span style="color:#b58900">hasattr</span>(v, <span style="color:#2aa198">&#39;__get__&#39;</span>):
        <span style="color:#719e07">return</span> v<span style="color:#719e07">.</span>__get__(<span style="color:#268bd2">self</span>)
    <span style="color:#719e07">return</span> v
</code></pre></div><blockquote>
<p>è¯·æ³¨æ„ï¼šé‡å†™ <code>__getattribute__()</code> ä¼šé˜»æ­¢æè¿°å™¨çš„è‡ªåŠ¨è°ƒç”¨ã€‚</p>
</blockquote>
<h2 id="å‡½æ•°å±æ€§">å‡½æ•°å±æ€§</h2>
<p>å‡½æ•°ä¹Ÿæ˜¯ Python <code>function</code> å¯¹è±¡ï¼Œæ‰€ä»¥ä¸€æ ·ï¼Œå®ƒä¹Ÿå…·æœ‰ä»»æ„å±æ€§ï¼Œè¿™æœ‰æ—¶å€™æ˜¯æœ‰ç”¨çš„ï¼Œæ¯”å¦‚å®ç°ä¸€ä¸ªç®€å•çš„å‡½æ•°è°ƒç”¨è·Ÿè¸ªè£…é¥°å™¨ï¼š</p>
<div class="highlight"><pre style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#719e07">def</span> <span style="color:#268bd2">calltracker</span>(func):
    <span style="color:#268bd2">@wraps</span>(func)
    <span style="color:#719e07">def</span> <span style="color:#268bd2">wrapper</span>(<span style="color:#719e07">*</span>args, <span style="color:#719e07">**</span>kwargs):
        wrapper<span style="color:#719e07">.</span>calls <span style="color:#719e07">+=</span> <span style="color:#2aa198">1</span>
        <span style="color:#719e07">return</span> func(<span style="color:#719e07">*</span>args, <span style="color:#719e07">**</span>kwargs)
    wrapper<span style="color:#719e07">.</span>calls <span style="color:#719e07">=</span> <span style="color:#2aa198">0</span>
    <span style="color:#719e07">return</span> wrapper

<span style="color:#268bd2">@calltracker</span>
<span style="color:#719e07">def</span> <span style="color:#268bd2">f</span>():
    <span style="color:#719e07">return</span> <span style="color:#2aa198">&#39;f called&#39;</span>
</code></pre></div><div class="highlight"><pre style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#719e07">&gt;&gt;&gt;</span> f<span style="color:#719e07">.</span>calls
<span style="color:#2aa198">0</span>
<span style="color:#719e07">&gt;&gt;&gt;</span> f()
<span style="color:#2aa198">&#39;f called&#39;</span>
<span style="color:#719e07">&gt;&gt;&gt;</span> f<span style="color:#719e07">.</span>calls
<span style="color:#2aa198">1</span>
</code></pre></div><h1 id="å‚è€ƒ">å‚è€ƒ</h1>
<ul>
<li><a href="https://utcc.utoronto.ca/~cks/space/blog/python/HowFunctionsToMethods">HowFunctionsToMethods</a></li>
<li><a href="https://docs.python.org/3/howto/descriptor.html">Descriptor HowTo Guide</a></li>
<li><a href="https://docs.python.org/3/reference/datamodel.html">Python Data model</a></li>
<li><a href="https://rushter.com/blog/python-class-internals">Understanding internals of Python classes</a></li>
</ul>
<!-- Python Tutorial: Understanding Python MRO - Class search path -->
		</div>
		<br>
		
		
		<hr>
			<footer class="post__footer">
				
<div class="post__tags tags clearfix">
	<svg class="tags__badge icon icon-tag" width="16" height="16" viewBox="0 0 32 32"><path d="M32 19c0 1-1 2-1 2L21 31s-1 1-2 1-2-1-2-1L2 16c-1-1-1.4-2-1.4-2S0 12.5 0 11V3C0 1.5.8.8.8.8S1.5 0 3 0h8c1.5 0 3 .6 3 .6S15 1 16 2l15 15s1 1 1 2zM7 10a3 3 0 1 0 0-6 3 3 0 0 0 0 6z"/></svg>
	<ul class="tags__list">
		<li class="tags__item"><a class="tags__link btn" href="/tags/%E5%9F%BA%E7%A1%80%E5%8E%9F%E7%90%86/" rel="tag">åŸºç¡€åŸç†</a></li>
	</ul>
</div>
			</footer>
		
	</article>
</main>

<div class="authorbox clearfix">
	<figure class="authorbox__avatar">
		<a href="/about">
			<img alt="å…³äº feileo avatar" src="https://cdn.at7h.com/img/avatar.jpg" class="avatar" height="90"
				width="90">
		</a>
	</figure>
	<div class="authorbox__header">
		<a href="/about">
			<span class="authorbox__name">å…³äº feileo</span>
		</a>
	</div>
	<div class="authorbox__description">
		You may say I&#39;m a dreamer, but I&#39;m not the only one.
	</div>
	<div class="authorbox__description_sub">
		--John Winston Lennon ã€ŠImagineã€‹
	</div>
</div>

<nav class="post-nav flex">
	<div class="post-nav__item post-nav__item--prev">
		<a class="post-nav__link" href="/posts/gc-in-py/" rel="prev"><span class="post-nav__caption">Â«&thinsp;ä¸Šä¸€ç¯‡</span><p class="post-nav__post-title">GC æœºåˆ¶æ¢ç©¶ä¹‹ Python ç¯‡</p></a>
	</div>
</nav>

<section class="comments">
    <div id="utter-container"></div>
    <script src="https://utteranc.es/client.js"
        repo= 'feileo/feileo.github.io'
        issue-term= "pathname"
        theme= 'github-light'
        crossorigin= "anonymous",
        label='âœ¨ğŸ’¬âœ¨'
        async>
	</script> 
</section>



			</div>
			
		</div>
		<footer class="footer">
	<div>
		
		<div class="footer__copyright">
			<div class="footer__text">
				<p>æœ¬åšå®¢åŸºäº <a href="https://golang.google.cn/" target="_blank"> Golang </a> + <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> +  <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> æ„å»º</p>
        <p>æœ¬ç«™ç”± <a href="https://www.upyun.com/?utm_source=lianmeng&utm_medium=referral" target="_blank"><img width="50" src="https://cdn.at7h.com/img/upyun_logo.png"></a> æä¾› CDN åŠ é€Ÿ/é™æ€èµ„æºå­˜å‚¨æœåŠ¡</p>
				<p>ç”± <a href="https://utteranc.es/" target="_blank"><img width="19" src="https://cdn.at7h.com/img/utteranc.png"> utterances</a> æä¾›è¯„è®ºç³»ç»Ÿ</p>
				<p>
					<span id="busuanzi_container_site_pv">
						æœ¬ç«™è¿è¡Œè‡ª 2020-10-01,
						ç´¯è®¡ PV
						1<span id="busuanzi_value_site_pv"><img width="16" src="https://cdn.at7h.com/img/spinner.png" /></span>
					</span>,
					<span id="busuanzi_container_site_uv">
						UV <span id="busuanzi_value_site_uv"><img width="16" src="https://cdn.at7h.com/img/spinner.png" /></span>
					</span>
				</p>
		<p>
			<a target="_blank" href="/sitemap.xml">ç«™ç‚¹åœ°å›¾</a> &nbsp;Â·&nbsp; 
			<a target="_blank" href="/index.xml" type="application/rss+xml" title="rss"> RSS 
			</a>
		</p>
        <p>ç‰ˆæƒæ‰€æœ‰ &copy; 2021 at7h.com</p>
        

			</div>
		</div>
		<div class="footer__text__sub">
			<a target="_blank" href="http://beian.miit.gov.cn">äº¬ ICP å¤‡ 2020037066 å· - 1</a>
			<br>
			<a target="_blank" href="http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=61092802000118">
				<img style="vertical-align: text-bottom;" width="18" src="https://cdn.at7h.com/img/beian.png">
				é™•å…¬ç½‘å®‰å¤‡ 61092802000118 å·
      </a>
		</div>
	</div>
</footer>
	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>
